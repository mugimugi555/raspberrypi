#!/usr/bin/bash

#

#-----------------------------------------------------------------------------------------------------------------------
# backup repository
#-----------------------------------------------------------------------------------------------------------------------
cp /etc/apt/sources.list ~/sources.list ;
cp /etc/apt/sources.list.d/raspi.list ~/raspi.list ;

#-----------------------------------------------------------------------------------------------------------------------
# write repository
#-----------------------------------------------------------------------------------------------------------------------
sudo sed -i 's/buster/bullseye/g' /etc/apt/sources.list ;
sudo sed -i 's/buster/bullseye/g' /etc/apt/sources.list.d/raspi.list ;

#-----------------------------------------------------------------------------------------------------------------------
# before install gcc-8-base
#-----------------------------------------------------------------------------------------------------------------------
sudo apt update ;
sudo apt install -y gcc-8-base ;

#-----------------------------------------------------------------------------------------------------------------------
# upgrade simulate
#-----------------------------------------------------------------------------------------------------------------------
apt --simulate upgrade -y ;

#-----------------------------------------------------------------------------------------------------------------------
# upgrade
#-----------------------------------------------------------------------------------------------------------------------
sudo apt upgrade -y ;
sudo apt dist-upgrade -y ;
sudo apt autoremove -y ;

#-----------------------------------------------------------------------------------------------------------------------
# finish
#-----------------------------------------------------------------------------------------------------------------------
sudo reboot now ;

#-----------------------------------------------------------------------------------------------------------------------
# cannot lunch app at bullseye
#-----------------------------------------------------------------------------------------------------------------------
#omxplayer
#/usr/bin/omxplayer.bin: error while loading shared libraries: libbrcmGLESv2.so: cannot open shared object file: No such file or directory
